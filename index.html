<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Egyptian Arabic â†” English Translator</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 20px;
  max-width: 800px;
  margin: auto;
}
h1 {
  text-align: center;
}
textarea, select, button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  font-size: 16px;
}
textarea {
  height: 130px;
}
button {
  background: #007bff;
  color: white;
  border: none;
  cursor: pointer;
}
button:hover {
  background: #0056b3;
}
footer {
  text-align: center;
  margin-top: 15px;
  font-size: 13px;
  color: #555;
}
</style>
</head>

<body>

<h1>ðŸ‡ªðŸ‡¬ Egyptian Arabic â†” ðŸ‡¬ðŸ‡§ English Translator</h1>

<textarea id="inputText" placeholder="Ø§ÙƒØªØ¨ Ù…ØµØ±ÙŠ Ø£Ùˆ English Ù‡Ù†Ø§"></textarea>

<select id="direction">
  <option value="ar-en">Egyptian Arabic â†’ English</option>
  <option value="en-ar">English â†’ Egyptian Arabic</option>
</select>

<button onclick="translateText()">Translate</button>

<textarea id="outputText" placeholder="Ø§Ù„ØªØ±Ø¬Ù…Ø© / Translation" readonly></textarea>

<footer>
Works with Egyptian slang â€¢ Free â€¢ No server needed
</footer>

<script>
// ===============================
// 1. EGYPTIAN SLANG NORMALIZATION
// ===============================
function normalizeEgyptian(text) {
  const slangMap = {
    "Ø¹Ø§ÙŠØ²": "Ø£Ø±ÙŠØ¯",
    "Ø¹Ø§ÙŠØ²Ø©": "Ø£Ø±ÙŠØ¯",
    "Ù…Ø´": "Ù„ÙŠØ³",
    "Ù…Ø´ Ø¹Ø§Ø±Ù": "Ù„Ø§ Ø£Ø¹Ø±Ù",
    "Ù„ÙŠÙ‡": "Ù„Ù…Ø§Ø°Ø§",
    "Ø§Ø²Ø§ÙŠ": "ÙƒÙŠÙ",
    "ÙÙŠÙ†": "Ø£ÙŠÙ†",
    "Ø¥Ù…ØªÙ‰": "Ù…ØªÙ‰",
    "Ø¨ØªØ§Ø¹": "Ø´ÙŠØ¡",
    "Ø­Ø§Ø¬Ø©": "Ø´ÙŠØ¡",
    "ÙƒØ¯Ù‡": "Ù‡ÙƒØ°Ø§",
    "Ø®Ø§Ù„Øµ": "Ø¬Ø¯Ø§Ù‹",
    "Ù‚ÙˆÙŠ": "Ø¬Ø¯Ø§Ù‹",
    "Ø£ÙˆÙŠ": "Ø¬Ø¯Ø§Ù‹",
    "Ù„Ø³Ù‡": "Ù…Ø§ Ø²Ø§Ù„",
    "Ø®Ù„Øµ": "Ø§Ù†ØªÙ‡Ù‰",
    "ØªÙ…Ø§Ù…": "Ø­Ø³Ù†Ø§Ù‹",
    "Ù…Ø§Ø´ÙŠ": "Ù…ÙˆØ§ÙÙ‚",
    "ÙˆØ­Ø´": "Ø³ÙŠØ¡",
    "Ø­Ù„Ùˆ": "Ø¬ÙŠØ¯",
    "Ø¨Øµ": "Ø§Ù†Ø¸Ø±",
    "Ø±ÙˆØ­": "Ø§Ø°Ù‡Ø¨",
    "ØªØ¹Ø§Ù„Ù‰": "ØªØ¹Ø§Ù„",
    "ÙÙŠÙ†Ùƒ": "Ø£ÙŠÙ† Ø£Ù†Øª",
    "Ù…Ø§Ù„Ùƒ": "Ù…Ø§ Ø¨Ùƒ",
    "Ø­Ø§Ø³Ø³": "Ø£Ø´Ø¹Ø±",
    "Ø¬ÙˆØ¹Ø§Ù†": "Ø¬Ø§Ø¦Ø¹",
    "Ø¹Ø·Ø´Ø§Ù†": "Ø¹Ø·Ø´"
  };

  for (let word in slangMap) {
    text = text.replaceAll(word, slangMap[word]);
  }
  return text;
}

// ===============================
// 2. TRANSLATION FUNCTION
// ===============================
async function translateText() {
  let text = document.getElementById("inputText").value.trim();
  const direction = document.getElementById("direction").value;

  if (!text) {
    alert("Please enter text");
    return;
  }

  let sourceLang, targetLang;

  if (direction === "ar-en") {
    text = normalizeEgyptian(text); // Fix Egyptian slang first
    sourceLang = "ar";
    targetLang = "en";
  } else {
    sourceLang = "en";
    targetLang = "ar";
  }

  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLang}&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;

  try {
    const response = await fetch(url);
    const data = await response.json();
    const translated = data[0].map(x => x[0]).join("");
    document.getElementById("outputText").value = translated;
  } catch (e) {
    document.getElementById("outputText").value = "Translation error.";
  }
}
</script>

</body>
</html>
